{
  "$schema": "./schema.json",
  "id": "ENT027",
  "name": "Language",
  "description": "Represents an available language in the system for UI and content translation",
  "table": "Languages",
  "status": "draft",
  "created_at": "2026-01-21",
  "updated_at": "2026-01-21",

  "fields": [
    {
      "name": "Id",
      "type": "Guid",
      "nullable": false,
      "description": "Unique identifier"
    },
    {
      "name": "Code",
      "type": "string",
      "max_length": 10,
      "nullable": false,
      "description": "ISO 639-1 language code (e.g., 'en', 'es', 'fr')"
    },
    {
      "name": "Name",
      "type": "string",
      "max_length": 100,
      "nullable": false,
      "description": "English name of the language (e.g., 'English', 'Spanish')"
    },
    {
      "name": "NativeName",
      "type": "string",
      "max_length": 100,
      "nullable": false,
      "description": "Name in the language itself (e.g., 'English', 'Espanol')"
    },
    {
      "name": "FlagCode",
      "type": "string",
      "max_length": 10,
      "nullable": true,
      "description": "Country code for flag display (e.g., 'us', 'es', 'fr')"
    },
    {
      "name": "IsEnabled",
      "type": "bool",
      "nullable": false,
      "default": true,
      "description": "Whether the language is available for selection"
    },
    {
      "name": "IsDefault",
      "type": "bool",
      "nullable": false,
      "default": false,
      "description": "Whether this is the system default language"
    },
    {
      "name": "SortOrder",
      "type": "int",
      "nullable": false,
      "default": 0,
      "description": "Display order in language selectors"
    },
    {
      "name": "CreatedAt",
      "type": "DateTime",
      "nullable": false,
      "description": "Timestamp when the language was added"
    },
    {
      "name": "UpdatedAt",
      "type": "DateTime",
      "nullable": false,
      "description": "Timestamp when last updated"
    }
  ],

  "validation_rules": [
    {
      "id": "R-LANG-001",
      "field": "Code",
      "rule": "Must be a valid ISO 639-1 language code",
      "error_code": "INVALID_LANGUAGE_CODE",
      "error_message": "Language code must be a valid ISO 639-1 code"
    },
    {
      "id": "R-LANG-002",
      "field": "Code",
      "rule": "Must be unique in the system",
      "error_code": "DUPLICATE_LANGUAGE_CODE",
      "error_message": "A language with this code already exists"
    },
    {
      "id": "R-LANG-003",
      "field": "IsDefault",
      "rule": "Only one language can be the default",
      "error_code": "MULTIPLE_DEFAULT_LANGUAGES",
      "error_message": "Only one language can be set as the default"
    },
    {
      "id": "R-LANG-004",
      "field": "IsEnabled",
      "rule": "Cannot disable the default language",
      "error_code": "CANNOT_DISABLE_DEFAULT",
      "error_message": "Cannot disable the default language"
    }
  ],

  "relationships": [],

  "indexes": [
    {
      "name": "IX_Languages_Code",
      "columns": ["Code"],
      "unique": true
    },
    {
      "name": "IX_Languages_IsDefault",
      "columns": ["IsDefault"],
      "unique": false,
      "filter": "IsDefault = true"
    },
    {
      "name": "IX_Languages_IsEnabled_SortOrder",
      "columns": ["IsEnabled", "SortOrder"],
      "unique": false
    }
  ],

  "api_representation": {
    "dto_name": "LanguageDto",
    "include_fields": ["Id", "Code", "Name", "NativeName", "FlagCode", "IsEnabled", "IsDefault", "SortOrder"],
    "computed_fields": []
  },

  "multi_tenancy": {
    "is_tenant_root": false,
    "scope_field": null,
    "notes": "Languages are global to the system, not organization-scoped"
  },

  "seed_data": [
    {
      "Code": "en",
      "Name": "English",
      "NativeName": "English",
      "FlagCode": "us",
      "IsEnabled": true,
      "IsDefault": true,
      "SortOrder": 1
    },
    {
      "Code": "es",
      "Name": "Spanish",
      "NativeName": "Espanol",
      "FlagCode": "es",
      "IsEnabled": true,
      "IsDefault": false,
      "SortOrder": 2
    }
  ],

  "code_location": {
    "entity": "orbitos-api/src/OrbitOS.Domain/Entities/Language.cs",
    "dto": "orbitos-api/src/OrbitOS.Api/Controllers/LanguagesController.cs",
    "frontend_type": "orbitos-web/app/types/i18n.ts"
  }
}
